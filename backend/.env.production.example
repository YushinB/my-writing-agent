# ================================
# PRODUCTION ENVIRONMENT VARIABLES
# ================================
# ⚠️  IMPORTANT: Never commit actual .env.production file to version control
# ⚠️  Generate strong, unique secrets for production
# ⚠️  Use secrets management service in cloud deployments

# Environment
NODE_ENV=production

# Server
PORT=3000
API_VERSION=v1

# Database (PostgreSQL)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public&connection_limit=10&pool_timeout=20
# Use managed database service in production (AWS RDS, Railway, Heroku Postgres, etc.)
# Connection pool params: connection_limit (default: num_cpus * 2 + 1), pool_timeout (seconds)
DATABASE_URL=postgresql://postgres:STRONG_PASSWORD_HERE@postgres:5432/prosepolish_db?schema=public&connection_limit=10&pool_timeout=20&connect_timeout=10
POSTGRES_USER=postgres
POSTGRES_PASSWORD=STRONG_PASSWORD_HERE
POSTGRES_DB=prosepolish_db

# Redis
# Use managed Redis service in production (Upstash, Redis Cloud, AWS ElastiCache, etc.)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=STRONG_REDIS_PASSWORD_HERE
REDIS_DB=0

# JWT Secrets
# ⚠️  CRITICAL: Generate strong random secrets (use: openssl rand -base64 64)
# Never use the same secrets as development/staging
JWT_ACCESS_SECRET=GENERATE_STRONG_SECRET_AT_LEAST_64_CHARS_LONG
JWT_REFRESH_SECRET=GENERATE_DIFFERENT_STRONG_SECRET_AT_LEAST_64_CHARS_LONG
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# Google Gemini AI
# Get API key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-production-gemini-api-key-here
GEMINI_MODEL=gemini-2.0-flash

# CORS
# ⚠️  Set to your actual frontend domain(s)
# Examples: https://yourdomain.com,https://www.yourdomain.com
CORS_ORIGIN=https://yourdomain.com

# Rate Limiting (Production values - more restrictive)
RATE_LIMIT_WINDOW_MS=900000       # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100       # 100 requests per 15 min
RATE_LIMIT_AUTH_MAX=5             # 5 auth attempts per 15 min
RATE_LIMIT_LLM_MAX=20             # 20 LLM requests per 15 min

# Cache TTL (in seconds)
CACHE_TTL_DICTIONARY=604800       # 7 days
CACHE_TTL_USER=3600               # 1 hour
CACHE_TTL_LLM=86400               # 1 day

# External APIs
FREE_DICTIONARY_API_URL=https://api.dictionaryapi.dev/api/v2/entries/en

# Logging
LOG_LEVEL=warn                    # Production: warn (less verbose than dev)
LOG_FILE_ERROR=logs/error.log
LOG_FILE_COMBINED=logs/combined.log

# Session
SESSION_EXPIRY=86400              # 24 hours

# Security Headers (Helmet.js configuration)
ENABLE_HELMET=true
ENABLE_HTTPS_REDIRECT=true        # Set to false if behind HTTPS proxy

# Performance
# Database connection pool settings (if using custom pool)
DB_POOL_MIN=2
DB_POOL_MAX=10

# Additional Production Settings
TRUST_PROXY=1                     # Set to 1 if behind reverse proxy (Nginx, CloudFlare, etc.)
